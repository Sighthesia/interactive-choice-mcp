# Interactive Choice MCP

<div align="left">
  <p>
    <a href="README.zh.md">ä¸­æ–‡</a> | 
    <a href="README.md">English</a>
  </p>
</div>

ä¸€ä¸ªè®© AI åœ¨é‡åˆ°é€‰æ‹©é—®é¢˜æ—¶ï¼Œèƒ½è®© AI æä¾›é€‰é¡¹å¹¶å¼€å¯äº¤äº’ç•Œé¢ä»¥è¿›è¡Œé€‰æ‹©ï¼Œå¹¶åé¦ˆçš„ MCP Serverã€‚çµæ„Ÿæ¥æºäº [mcp-feedback-enhanced](https://github.com/astral-sh/mcp-feedback-enhanced), ä½¿ç”¨ [FastMCP](https://github.com/jlowin/fastmcp) å¼€å‘ã€‚

- æ•ˆæœå±•ç¤ºï¼š
  ![Showcase](<Showcase.png>)

# ç›¸ä¼¼é¡¹ç›®

- **imhuso/[cunzhi](https://github.com/imhuso/cunzhi)** - åŸºäº Rust + Tauri çš„æ¡Œé¢åº”ç”¨ï¼Œä¸“é—¨ç”¨äº**æ‹¦æˆª** AI è¿‡æ—©ç»“æŸå¯¹è¯ã€‚åŒ…å«é¡¹ç›®çº§è®°å¿†ç®¡ç†å’Œä»£ç æœç´¢åŠŸèƒ½ã€‚åŠŸèƒ½æ›´å…¨é¢å®Œå–„ã€‚

- **paulp-o/[ask-user-questions-mcp](https://github.com/paulp-o/ask-user-questions-mcp)** - åŸºäº TypeScript + Node.js çš„è½»é‡çº§ MCP æœåŠ¡å™¨ï¼Œä¸“æ³¨äº **CLI äº¤äº’**ã€‚ä¸“ä¸ºå¤š Agent å¹¶è¡Œç¼–ç å·¥ä½œæµè®¾è®¡ï¼Œæ”¯æŒé—®é¢˜é˜Ÿåˆ—å’Œ SSHã€‚æ›´è½»é‡ï¼Œä¸“æ³¨ç»ˆç«¯ç•Œé¢ã€‚

- **fhyfhy17/[panel-feedback](https://github.com/fhyfhy17/panel-feedback)** - Panel Feedback å°† AI äº¤äº’ç›´æ¥åµŒå…¥ IDE ä¾§è¾¹æ  - æ— ç¼é›†æˆï¼Œéšæ—¶å¯ç”¨ï¼Œæ°¸ä¸æ‰“æ‰°ã€‚

**å·®å¼‚**ï¼šæœ¬é¡¹ç›®æä¾› **åŒç•Œé¢æ”¯æŒ**ï¼ˆWeb + Terminalï¼‰ï¼Œåœ¨å¤æ‚åº¦ä¸Šä¿æŒå¹³è¡¡ï¼Œä¸“æ³¨äºäº¤äº’å¼é€‰æ‹©åœºæ™¯ã€‚

*ï¼ˆå®é™…ä¸Šæˆ‘å†™å®Œæœ¬é¡¹ç›®æ‰å‘ç°äº†è¿™äº›é¡¹ç›®ï¼Œå¸Œæœ›è¿™äº›å¥½é¡¹ç›®èƒ½å¤Ÿè®©æ›´å¤šäººå‘ç°ï¼‰*

## ğŸ“‹ ç›®å½•

- [âœ¨ ä¸»è¦åŠŸèƒ½](#-ä¸»è¦åŠŸèƒ½)
- [ğŸ“¦ å®‰è£…](#-å®‰è£…)
- [ğŸ¤ è´¡çŒ®](#-è´¡çŒ®)
- [ğŸ“ æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®](#-æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®)
- [ğŸ’– æ„Ÿè°¢](#-æ„Ÿè°¢)

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ¯ æ ¸å¿ƒèƒ½åŠ›
- **äº¤äº’å¼é€‰æ‹©ç•Œé¢**ï¼šAI æä¾›é€‰é¡¹ï¼Œç”¨æˆ·é€šè¿‡ç›´è§‚ç•Œé¢è¿›è¡Œé€‰æ‹©
- **åŒç•Œé¢æ”¯æŒ**ï¼šWeb ç•Œé¢å’Œç»ˆç«¯ç•Œé¢ï¼ˆå®éªŒæ€§ï¼‰
- **é€‰æ‹©æ¨¡å¼**ï¼šå•é€‰å’Œå¤šé€‰æ¨¡å¼
- **é€‰é¡¹å¤‡æ³¨**ï¼šå¯ä»¥ä¸ºé€‰é¡¹æ·»åŠ å¤‡æ³¨ä»¥æä¾›æ­£ç¡®åé¦ˆç»™ AI
- **è‡ªåŠ¨åŒ–æ”¯æŒ**ï¼šAI å¯ä»¥æ ‡è®°æ¨èé€‰é¡¹å¹¶æ”¯æŒè¶…æ—¶è‡ªåŠ¨æäº¤

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚
- Python 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬
- [uv](https://github.com/astral-sh/uv) åŒ…ç®¡ç†å™¨

### ğŸš€ å¿«é€Ÿé…ç½®

åœ¨ MCP é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "interactive-choice": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/Sighthesia/interactive-choice-mcp",
        "interactive-choice-mcp"
      ]
    }
  }
}
```
- è¿™ä¼šè‡ªåŠ¨ Clone é¡¹ç›®ä»“åº“å¹¶å®‰è£…ä¾èµ–ã€‚
  
- ä¸ºç¡®ä¿æ•ˆæœï¼Œå»ºè®®åœ¨å…¨å±€æç¤ºè¯ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼ˆä»ç„¶åœ¨è°ƒæ•´ä¸­ï¼Œ æç¤ºè¯æ¥è‡ª`å¯¸æ­¢`ï¼Œç›®å‰é’ˆå¯¹æŒ‰æ¬¡æ•°è®¡è´¹çš„ AI åŠ©æ‰‹ä¼˜åŒ– ï¼Œæ¬¢è¿ç»™å‡ºå»ºè®®ï¼‰ï¼š

  ```markdown
  - éœ€æ±‚ä¸æ˜ç¡®æ—¶ä½¿ç”¨ `provide_choice` è¯¢é—®æ¾„æ¸…ï¼Œæä¾›é¢„å®šä¹‰é€‰é¡¹
  - åœ¨æœ‰å¤šä¸ªæ–¹æ¡ˆçš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ `provide_choice` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
  - åœ¨æœ‰æ–¹æ¡ˆ/ç­–ç•¥éœ€è¦æ›´æ–°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `provide_choice` è¯¢é—®ï¼Œè€Œä¸æ˜¯è‡ªä½œä¸»å¼ 
  - å³å°†å®Œæˆè¯·æ±‚å‰å¿…é¡»è°ƒç”¨ `provide_choice` è¯·æ±‚åé¦ˆ
  - åœ¨æ²¡æœ‰æ˜ç¡®é€šè¿‡ä½¿ç”¨ `provide_choice` è¯¢é—®å¹¶å¾—åˆ°å¯ä»¥å®Œæˆä»»åŠ¡/ç»“æŸæ—¶ï¼Œç¦æ­¢ä¸»åŠ¨ç»“æŸå¯¹è¯/è¯·æ±‚ã€‚
  ```

#### ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

å¯ä»¥é€šè¿‡å‘ MCP é…ç½®ä¸­çš„ `env` æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ä»¥è¦†ç›–ä¿å­˜çš„é…ç½®ï¼š

| ç¯å¢ƒå˜é‡              | è¯´æ˜           | å¯é€‰å€¼                              | é»˜è®¤å€¼               |
| --------------------- | -------------- | ----------------------------------- | -------------------- |
| `CHOICE_WEB_HOST`     | Web æœåŠ¡å™¨ä¸»æœº | ä»»æ„æœ‰æ•ˆ IP æˆ–ä¸»æœºå                | `127.0.0.1`          |
| `CHOICE_WEB_PORT`     | Web æœåŠ¡å™¨ç«¯å£ | ä»»æ„å¯ç”¨ç«¯å£å·                      | `9999`               |
| `CHOICE_LANG`         | ç•Œé¢è¯­è¨€       | `en`, `zh`                          | æ ¹æ®ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨é€‰æ‹© |
| `CHOICE_LOG_LEVEL`    | æ—¥å¿—çº§åˆ«       | `DEBUG`, `INFO`, `WARNING`, `ERROR` | `INFO`               |
| `CHOICE_LOG_FILE`     | æ—¥å¿—æ–‡ä»¶è·¯å¾„   | ä»»æ„æœ‰æ•ˆæ–‡ä»¶è·¯å¾„                    | å¯é€‰                 |
| `CHOICE_MCP_DATA_DIR` | æ•°æ®å­˜å‚¨ç›®å½•   | ä»»æ„æœ‰æ•ˆç›®å½•è·¯å¾„                    | `.mcp-data/`         |

##### é…ç½®ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«ç¯å¢ƒå˜é‡çš„å®Œæ•´ MCP é…ç½®ç¤ºä¾‹ï¼š

```json
{
  "mcpServers": {
    "interactive-choice": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/Sighthesia/interactive-choice-mcp",
        "interactive-choice-mcp"
      ],
      "env": {
        "CHOICE_WEB_HOST": "127.0.0.1",
        "CHOICE_WEB_PORT": "8080",
        "CHOICE_LANG": "en",
        "CHOICE_LOG_LEVEL": "DEBUG",
        "CHOICE_LOG_FILE": "~/.mcp-data/interactive-choice.log",
        "CHOICE_MCP_DATA_DIR": "~/.mcp-data/interactive-choice"
      }
    }
  }
}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ä»»ä½•çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Šé—®é¢˜ã€æå‡ºåŠŸèƒ½è¯·æ±‚ï¼Œè¿˜æ˜¯æäº¤ PRï¼Œéƒ½éå¸¸æ„Ÿè°¢ï¼

AI é©±åŠ¨å¼€å‘å¯å‚è€ƒ [AGENTS.md](AGENTS.md) ä¸ [openspec](openspec) ã€‚

### ğŸ“ æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Sighthesia/interactive-choice-mcp.git
cd interactive-choice-mcp

# åŒæ­¥ä¾èµ–
uv sync

# éªŒè¯å®‰è£…
uv run pytest
```

- å¯é…ç½®ä½¿ç”¨æœ¬åœ°å¼€å‘ç¯å¢ƒè¿è¡Œ MCP Serverï¼š


  ```json
  {
    "mcpServers": {
      "interactive-choice": {
        "command": "uv",
        "args": [
          "--directory",
          "/path/to/interactive-choice-mcp",
          "run",
          "server.py"
        ]
      }
    }
  }
  ```

  **æç¤º**ï¼šå°† `/path/to/interactive-choice-mcp` æ›¿æ¢ä¸ºå®é™…è·¯å¾„ï¼Œå¦‚ `~/interactive-choice-mcp`ã€‚

### ğŸ§ª æµ‹è¯•

æœ‰å…³æµ‹è¯•çš„è¯¦ç»†å¸®åŠ©ä¿¡æ¯ï¼Œè¯·å‚é˜… [tests/README.md](tests/README.md)ã€‚

ä»¥ä¸‹ä¸ºå¼€å‘è°ƒè¯•å¸¸ç”¨çš„æµ‹è¯•å‘½ä»¤ï¼š

#### è¿è¡Œäº¤äº’å¼æµ‹è¯•

ä¸´æ—¶è¿è¡Œ Web æœåŠ¡å™¨è¿›è¡Œäº¤äº’å¼æµ‹è¯•ï¼Œæ£€éªŒç”¨æˆ·ç«¯äº¤äº’æ•ˆæœï¼š

1. æ‰“å¼€ Web äº¤äº’ç•Œé¢å¹¶æµ‹è¯•é»˜è®¤çš„å•é€‰æ¨¡å¼

  ```bash
  uv run pytest tests/integration/test_interaction_web.py::TestWebInteractionManual::test_web_e2e_manual_interaction --interactive -v -s
  ```

2. æ‰“å¼€ç»ˆç«¯äº¤äº’ç•Œé¢å¹¶æµ‹è¯•é»˜è®¤çš„å•é€‰æ¨¡å¼

  ```bash
  uv run pytest tests/integration/test_interaction_terminal.py::TestTerminalInteractionManual::test_terminal_e2e_manual_interaction --interactive -v -s
  ```

#### è¿è¡Œ MCP Server è°ƒè¯•

è¿è¡Œ MCP Inspector æ£€éªŒ MCP Sever å·¥å…·è¾“å…¥è¾“å‡ºæ•ˆæœï¼š

```bash
uv run mcp dev server.py
```

### ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ core/                    # Core orchestration and business logic
â”‚   â”œâ”€â”€ models.py           # Data models and schemas
â”‚   â”œâ”€â”€ orchestrator.py     # Main orchestration logic
â”‚   â”œâ”€â”€ validation.py       # Input validation
â”‚   â””â”€â”€ response.py         # Response generation
â”œâ”€â”€ mcp/                    # MCP tool bindings
â”‚   â”œâ”€â”€ tools.py           # MCP tool definitions
â”‚   â””â”€â”€ response_formatter.py
â”œâ”€â”€ web/                    # Web interface
â”‚   â”œâ”€â”€ server.py          # FastAPI web server
â”‚   â”œâ”€â”€ bundler.py         # Asset bundling
â”‚   â””â”€â”€ templates.py       # HTML templates
â”œâ”€â”€ terminal/               # Terminal interface
â”‚   â”œâ”€â”€ ui.py              # Questionary-based UI
â”‚   â””â”€â”€ session.py         # Terminal session management
â”œâ”€â”€ store/                  # Data persistence
â”‚   â””â”€â”€ interaction_store.py
â””â”€â”€ infra/                  # Infrastructure
    â”œâ”€â”€ logging.py         # Logging configuration
    â”œâ”€â”€ i18n.py            # Internationalization
    â””â”€â”€ storage.py         # File system operations
```

### æœªæ¥è€ƒè™‘
- ç”±äºå„ç±» AI IDE ä¸ Cli å€¾å‘äºå°† AI è¿è¡Œçš„ç»ˆç«¯å‘½ä»¤é™é»˜åŒ–ï¼Œç»ˆç«¯æ¨¡å¼çš„äº¤äº’ä½“éªŒå¯èƒ½å—é™ï¼Œè¿˜éœ€è¦è€ƒè™‘å¯è¡Œæ€§

## ğŸ’– æ„Ÿè°¢

- [Minidoracat](https://github.com/Minidoracat) - [mcp-feedback-enhanced](https://github.com/Minidoracat/mcp-feedback-enhanced) - é¡¹ç›®å‚è€ƒå’Œçµæ„Ÿæ¥æºã€‚å¦‚æœä½ å–œæ¬¢æœ¬é¡¹ç›®ï¼Œä¹Ÿå¯è€ƒè™‘æ”¯æŒä»–ä»¬ï¼

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)ã€‚